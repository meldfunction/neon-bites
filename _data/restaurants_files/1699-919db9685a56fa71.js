"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1699],{96755:function(e,t,n){n.d(t,{Ck:function(){return _},IR:function(){return p},Pd:function(){return m},Rc:function(){return y},WQ:function(){return h},_y:function(){return g},gq:function(){return b},k7:function(){return C},ml:function(){return d},uV:function(){return c},wO:function(){return l},xo:function(){return s},yU:function(){return f},yq:function(){return v}});var r=n(83041),a=n(11492),u=n(35146),i=n(84983),o=n(54603);let c=()=>(0,r.WE)("/api/legal",{staleTime:1/0,meta:{noToast:!0}}),s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.useIsClaudeDot)();return(0,r.uC)("/api/auth/send_code","POST",{...e,transformVariables:e=>({...e,source:t?"claude":"console"})})},l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.useIsClaudeDot)();return(0,r.uC)("/api/auth/send_magic_link","POST",{...e,transformVariables:e=>({...e,source:t?"claude":"console"})})},f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.useIsClaudeDot)();return(0,r.uC)("/api/auth/exchange_nonce_for_code","POST",{...e,transformVariables:e=>({...e,source:t?"claude":"console"})})},d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.useIsClaudeDot)();return(0,r.uC)("/api/auth/verify_magic_link","POST",{...e,transformVariables:e=>({...e,source:t?"claude":"console"})})},h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.useIsClaudeDot)();return(0,r.uC)("/api/auth/verify_code","POST",{...e,transformVariables:e=>({...e,source:t?"claude":"console"})})},p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.useIsClaudeDot)();return(0,r.uC)("/api/auth/verify_google","POST",{...e,transformVariables:e=>({...e,source:t?"claude":"console"})})},m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.useIsClaudeDot)();return(0,r.uC)("/api/auth/accept_invite","POST",{...e,transformVariables:e=>({...e,source:t?"claude":"console"})})},g=()=>(0,r.uC)("/api/auth/logout","POST"),v=()=>{let e=(0,i.useQueryClient)();return(0,r.uC)("/api/account","PUT",{async onSuccess(){await e.invalidateQueries([u.aY])}})},_=()=>(0,r.Ne)("/api/account","PUT",(e,t)=>(null==t?void 0:t.account)?{...t,account:{...t.account,settings:e}}:t,{queryKey:[u.aY],transformVariables:e=>({settings:e})}),C=()=>{let e=(0,i.useQueryClient)();return(0,r.uC)("/api/account/accept_legal_docs","PUT",{async onSuccess(){await e.invalidateQueries([u.aY])}})};function b(e){return(0,r.WE)("/api/signups/".concat(e),{enabled:!!e,staleTime:0})}function y(e,t){let n=(0,i.useQueryClient)(),a=(0,o.useRouter)();return(0,r.uC)("/api/enterprise_auth/sso_callback?code=".concat(e,"&state=").concat(t),"GET",{onSuccess:async()=>{await n.invalidateQueries([u.aY]),a.push("/new")}})}},31271:function(e,t,n){n.d(t,{K5:function(){return m},Ql:function(){return y},Z1:function(){return b},_A:function(){return v},nJ:function(){return _},rN:function(){return g},wy:function(){return C},z6:function(){return h}});var r=n(11492),a=n(23532),u=n(16096),i=n(59374),o=n(14983),c=n(87050);n(88337);var s=n(54603),l=n(7653),f=n(96755),d=n(31257);let h=()=>{let e=(0,s.useRouter)(),t=(0,a.useCookies)();return{refresh:()=>{e.refresh()},switchAndRefresh:(e,n)=>{t.set(o.cn.LAST_ACTIVE_ORG,e),n?location.pathname=n:location.reload()}}},p=e=>{let{account:t}=(0,u.useCurrentAccount)();return t&&((0,d.wJ)({account:t,isClaudeDot:e})||(0,d.c6)(t,e))?"/onboarding":t&&(0,d.kK)(t,e)?"/invites":t&&(0,d.D_)(t,e)?"/create":e?"/new":"/dashboard"};function m(e){let{value:t}=(0,c.F)("show_affirmative_consent"),{value:n}=(0,c.F)("show_affirmative_consent_for_privacy_policy");return(0,l.useMemo)(()=>[...t===e?["aup","consumer-terms"]:[],...n===e?["privacy"]:[]],[n,t,e])}let g=(e,t,n)=>{let{data:r}=(0,f.uV)(),{mutateAsync:a}=(0,f.k7)();return(0,l.useCallback)(async()=>{if(!e||!r||0===t.length)return;let u=t.map(e=>({document_id:r[e],accepted_via_checkbox:n}));await a({acceptances:u})},[e,r,t,a,n])},v=(e,t)=>{let{account:n,refetch:r,setActiveOrganizationUUID:a}=(0,u.useCurrentAccount)(),[o,c]=(0,l.useState)(!1),[s,d]=(0,l.useState)(!1),h=_(),{addSuccess:p}=(0,i.useToasts)(),{data:m}=(0,f.gq)(e);return(0,l.useEffect)(()=>{n&&o&&s&&(t?t(h):h())},[s,h,o,n,t]),(0,l.useCallback)(async()=>{c(!0),await r(),(null==m?void 0:m.organization_uuid)&&(a(m.organization_uuid),p("Successfully joined ".concat(m.organization_name))),d(!0)},[m,p,r,a])},_=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,s.useSearchParams)().get("returnTo"),n=C(e);return(0,l.useCallback)(()=>{n(t)},[n,t])},C=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{account:t}=(0,u.useCurrentAccount)(),[n,a]=(0,l.useState)(!1),i=(0,s.useRouter)(),[o,c]=(0,l.useState)(null),f=(0,s.usePathname)(),h=(0,s.useSearchParams)(),m=(0,r.useIsClaudeDot)(),g=p(m);return(0,l.useEffect)(()=>{(n||e)&&!t&&i.push((0,d.C2)(f,h.toString()))},[t,i,n,e,f,h]),(0,l.useEffect)(()=>{if(n&&t){let e=(0,d.eX)(t,o,g,m);i.push(e)}},[t,i,n,o,g,m]),(0,l.useCallback)(e=>{e&&c(e),a(!0)},[])};function b(){let[e,t]=(0,l.useState)(!1);return{getRecaptchaToken:(0,l.useCallback)(async(e,n)=>(t(!0),new Promise((r,a)=>{if("undefined"==typeof grecaptcha)return t(!1),a(Error("Recaptcha failed to load"));grecaptcha.enterprise.ready(()=>{grecaptcha.enterprise.execute(e,{action:n}).then(e=>{r(e),t(!1)},e=>{t(!1),a(e)})})})),[]),isLoading:e}}function y(e){let[t,n]=(0,l.useState)(!1);(0,l.useEffect)(()=>{if(!t){let t=setInterval(()=>{window.grecaptcha&&(n(!0),e())},10);return()=>clearInterval(t)}},[t,n,e])}},31257:function(e,t,n){n.d(t,{C2:function(){return s},D_:function(){return i},G9:function(){return l},c6:function(){return a},cG:function(){return o},eX:function(){return c},kK:function(){return u},wJ:function(){return r}});let r=e=>{let{account:t,isClaudeDot:n}=e,r=!1===t.settings.has_finished_claudeai_onboarding;return!t.full_name||!t.display_name||!!n&&r},a=(e,t)=>t&&!e.completed_verification_at,u=(e,t)=>!!function(e,t){for(let n of e.invites)if(n.organization.capabilities&&n.organization.capabilities.includes(t))return n}(e,t?"raven":"api"),i=(e,t)=>!t&&0===e.invites.length&&0===e.memberships.filter(e=>e.organization.capabilities.includes("api")).length,o=(e,t)=>r({account:e,isClaudeDot:t})||a(e,t)||u(e,t)||i(e,t),c=(e,t,n,r)=>{if(!t||!t.startsWith("/"))return n;if(o(e,r)){let e=new URLSearchParams({returnTo:t});return"".concat(n,"?").concat(e.toString())}return l(t)},s=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/login",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a="".concat(e,"?").concat(t),u=new URLSearchParams(r);return u.append("returnTo",a),"".concat(n,"?").concat(u.toString())};function l(e){let t=new URL(e,"http://example.com");return t.pathname+t.search}},59374:function(e,t,n){n.r(t),n.d(t,{ErrorsProvider:function(){return i},useToasts:function(){return o}});var r=n(27573),a=n(7653);let u=(0,a.createContext)(void 0);function i(e){let{children:t}=e,n=(0,a.useRef)(1),[i,o]=(0,a.useState)([]),c=(0,a.useCallback)(e=>{let t=n.current++;return o(n=>[...n,{id:t,message:e instanceof Error?e.message:e,toastType:"error"}]),t},[]),s=(0,a.useCallback)(e=>{let t=n.current++;return o(n=>[...n,{id:t,message:e,toastType:"success"}]),t},[]),l=(0,a.useCallback)(e=>{o(t=>t.filter(t=>t.id!==e))},[]),f=(0,a.useMemo)(()=>({toasts:i,addError:c,addSuccess:s,clearToast:l}),[i,c,s,l]);return(0,r.jsx)(u.Provider,{value:f,children:t})}function o(){let e=(0,a.useContext)(u);if(!e)throw Error("Must be called within ErrorsProvider");return e}},2715:function(e,t,n){var r=n(27573),a=n(44115),u=n(7653);t.Z=(0,u.memo)(function(e){let{size:t="md",fullscreen:n=!1,inheritColor:u}=e;return(0,r.jsx)("div",{className:(0,a.Z)(n?"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2":"m-auto"),children:(0,r.jsx)("div",{className:(0,a.Z)("sm"===t&&"h-4 w-4 border-2","md"===t&&"h-20 w-20 border-8",u?"border-current":"border-border-200","text-secondary inline-block animate-spin rounded-full border-solid border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]"),role:"status",children:(0,r.jsx)("span",{className:"sr-only",children:"Loading..."})})})})},92472:function(e,t,n){var r=n(44115),a=n(7653);function u(e){return function(t){for(var n=arguments.length,u=Array(n>1?n-1:0),i=1;i<n;i++)u[i-1]=arguments[i];let o=t.map(e=>e.replace(/\n/g,"").trim()),c=a.forwardRef((t,n)=>{let{className:i,...c}=t,s=u.map(e=>"function"==typeof e?e(t):e);return a.createElement(e,{...c,ref:n,className:(0,r.Z)(o,s,"string"==typeof i?i:"")})});return c.displayName="string"==typeof e?e:e.displayName,c}}function i(e){return u(e)}i.a=u("a"),i.aside=u("aside"),i.button=u("button"),i.main=u("main"),i.div=u("div"),i.form=u("form"),i.nav=u("nav"),i.fieldset=u("fieldset"),i.header=u("header"),i.h1=u("h1"),i.h2=u("h2"),i.h3=u("h3"),i.h4=u("h4"),i.h5=u("h5"),i.th=u("th"),i.td=u("td"),i.input=u("input"),i.label=u("label"),i.p=u("p"),i.section=u("section"),i.span=u("span"),i.li=u("li"),t.Z=i}}]);