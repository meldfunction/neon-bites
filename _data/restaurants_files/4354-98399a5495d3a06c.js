"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4354],{94354:function(e,t,n){n.d(t,{$H:function(){return P},$Y:function(){return Q},CJ:function(){return S},Gk:function(){return K},Ke:function(){return I},Ls:function(){return A},PD:function(){return E},QR:function(){return w},Rq:function(){return C},W:function(){return B},_C:function(){return k},cj:function(){return N},f7:function(){return T},gK:function(){return M},hA:function(){return b},j1:function(){return U},j7:function(){return D},jl:function(){return q},lg:function(){return O},o:function(){return y},yj:function(){return x}});var r=n(6700),i=n(83041),a=n(16096),u=n(17179),s=n(35146),o=n(36665),l=n(28505),c=n(84983),d=n(74822),v=n(11064),g=n.n(v),_=n(99733),f=n.n(_),p=n(54603),h=n(7653),m=n(50504);let y=(e,t)=>{let{activeOrganization:n}=(0,a.useCurrentAccount)(),r=null==n?void 0:n.uuid;return(0,i.WE)("/api/organizations/".concat(r,"/chat_conversations/").concat(e,"/chat_messages/").concat(t,"/debug"),{queryKey:[s.Ep,{orgUUID:r},{conversationUuid:e},{messageUuid:t}],enabled:!!t})},b=function(e){let{suppressError:t,enabled:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{activeOrganization:r}=(0,a.useCurrentAccount)(),u=null==r?void 0:r.uuid;return(0,i.WE)("/api/organizations/".concat(null!=u?u:"","/chat_conversations/").concat(e),{queryKey:[s.ph,{orgUUID:u},{uuid:e}],staleTime:3e5,enabled:!!u&&!!e&&n,select:e=>({...e,chat_messages:f()(e.chat_messages,"index")}),meta:{noToast:t}})},C=e=>{let t=(0,c.useQueryClient)(),{activeOrganization:n}=(0,a.useCurrentAccount)(),r=null==n?void 0:n.uuid,[i,u]=(0,h.useReducer)(e=>e+1,0),l=(0,o.B)([s.I8,{orgUUID:r},{uuid:e}]),v=(0,h.useMemo)(()=>t.getQueryData(l),[t,l,e,i]);return(0,h.useEffect)(()=>t.getQueryCache().subscribe(e=>{"updated"===e.type&&"success"===e.action.type&&(0,d._x)({queryKey:l},e.query)&&u()}),[t,u,l]),{data:v}},w=()=>{let{activeOrganization:e}=(0,a.useCurrentAccount)(),t=null==e?void 0:e.uuid;return(0,i.WE)("/api/organizations/".concat(null!=t?t:"","/chat_conversations"),{queryKey:[s.tv,{orgUUID:t}],staleTime:3e5,enabled:!!t,select:e=>f()(e,e=>new Date(e.updated_at)).reverse()})},k=function(e){let{suppressError:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{activeOrganization:n}=(0,a.useCurrentAccount)(),r=null==n?void 0:n.uuid,u=(0,h.useRef)([]),o="/api/organizations/".concat(null!=r?r:"","/chat_conversations/").concat(e,"?tree=True&rendering_mode=raw"),l=(0,i.WE)(o,{queryKey:[s.I8,{orgUUID:r},{uuid:e}],staleTime:3e5,enabled:!!r&&!!e,meta:{noToast:t}},m.fX),c=(0,h.useMemo)(()=>{if(!l.data)return u.current=[],u.current;let e=(0,m.kX)(l.data);if(e.length!==u.current.length||e.some((e,t)=>{var n;return e.uuid!==(null===(n=u.current[t])||void 0===n?void 0:n.uuid)}))return u.current=e,u.current;for(let t=0;t<e.length;t++)g()(e[t],u.current[t])||(u.current[t]=e[t]);return u.current},[l.data]);return{...l,currentPath:c}},P=(e,t)=>{let{mutate:n}=Q(),r=(0,p.useRouter)(),i=t||(0,l.H)();return(0,h.useCallback)(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{model:void 0,controlsOpen:!1};n({uuid:i,name:"",model:t.model});let a="/chat/".concat(i).concat(t.controlsOpen?"?controls=1":"");r[e](a)},[n,r,e,i])},Q=()=>{let{activeOrganization:e}=(0,a.useCurrentAccount)(),t=null==e?void 0:e.uuid,n=(0,c.useQueryClient)(),r=[s.tv,{orgUUID:t}],u=e=>[s.ph,{orgUUID:t},{uuid:e}],o=e=>[s.I8,{orgUUID:t},{uuid:e}];return(0,i.uC)("/api/organizations/".concat(null!=t?t:"","/chat_conversations"),"POST",{enabled:!!t,async onMutate(e){let t=u(e.uuid),i={summary:"",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),...e};await Promise.all([n.cancelQueries({queryKey:r}),n.cancelQueries({queryKey:t})]),n.setQueryData(r,e=>e&&[i,...e]),n.setQueryData(t,e=>({...e||{},...i,chat_messages:(null==e?void 0:e.chat_messages)||[]}))},onSuccess:e=>{n.setQueryData(r,t=>{if(!t)return;let n=t.findIndex(t=>t.uuid===e.uuid);if(-1===n)return t;let r=[...t];return r.splice(n,1,e),r}),n.setQueryData(o(e.uuid),t=>({...t||{},...e,chat_messages:(null==t?void 0:t.chat_messages)||[],messageByUuid:new Map,parentByChildUuid:new Map,childrenByParentUuid:new Map,selectedChildByUuid:new Map}))},onError(e,t){n.setQueryData(r,e=>null==e?void 0:e.filter(e=>e.uuid!==t.uuid)),n.setQueryData(u(t.uuid),void 0)}})},U=()=>{let{activeOrganization:e}=(0,a.useCurrentAccount)(),t=null==e?void 0:e.uuid,n=(0,c.useQueryClient)();return(0,i.Ne)(e=>"/api/organizations/".concat(null!=t?t:"","/chat_conversations/").concat(e),"DELETE",(e,t)=>{if(!t)return[];let n=t.findIndex(t=>t.uuid===e);if(!(n>-1))return t;{let e=[...t];return e.splice(n,1),e}},{enabled:!!t,queryKey:[s.tv,{orgUUID:t}],onSuccess:async(e,r)=>{await n.invalidateQueries([s.I8,{orgUUID:t},{uuid:r}])}})},T=e=>{let{activeOrganization:t}=(0,a.useCurrentAccount)(),n=null==t?void 0:t.uuid,r=(0,c.useQueryClient)();return(0,i.Ne)("/api/organizations/".concat(n,"/chat_conversations/delete_many"),"POST",(e,t)=>t?t.filter(t=>!e.conversation_uuids.includes(t.uuid)):[],{onSuccess:async t=>{await r.invalidateQueries([s.tv,{orgUUID:n}]),e&&e(t)},queryKey:[s.tv,{orgUUID:n}]})},x=e=>{let{activeOrganization:t}=(0,a.useCurrentAccount)(),n=null==t?void 0:t.uuid,r=null==t?void 0:t.capabilities.includes("raven");return(0,i.WE)("/api/organizations/".concat(n,"/chat_conversations/").concat(e,"/shares"),{queryKey:[s.zb,{orgUUID:n,conversationUUID:e}],enabled:!!n&&r,staleTime:3e5})},S=e=>{let{activeOrganization:t}=(0,a.useCurrentAccount)(),n=null==t?void 0:t.uuid;return(0,i.WE)("/api/organizations/".concat(n,"/chat_snapshots/").concat(e),{retry:!1,refetchInterval:!1,enabled:!!e,staleTime:0,queryKey:[s.ld,{orgUUID:n,snapshotUUID:e}]})},E=e=>{let{activeOrganization:t}=(0,a.useCurrentAccount)(),n=null==t?void 0:t.uuid,r=(0,c.useQueryClient)(),{data:u}=C(e);return(0,i.Ne)("/api/organizations/".concat(n,"/chat_conversations/").concat(e,"/share"),"POST",(e,t)=>{let n=null==u?void 0:u.chat_messages.findIndex(e=>e.uuid===(null==u?void 0:u.current_leaf_message_uuid));if(!n)return t;let r={uuid:"",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),snapshot_name:null==u?void 0:u.name,last_message_index:n,...e};return t?[...t,r]:[r]},{onSuccess:t=>{r.invalidateQueries([s.zb,{orgUUID:n,conversationUUID:e}]),r.invalidateQueries([s.ld,{orgUUID:n,snapshotUUID:t.uuid}]),r.invalidateQueries([s.VH,{orgUUID:n}])},queryKey:[s.zb,{orgUUID:n,conversationUUID:e}],meta:{errorMessage:"There was an error while trying to share the conversation. Please try again."}})},A=(e,t)=>{let{activeOrganization:n}=(0,a.useCurrentAccount)(),r=null==n?void 0:n.uuid,u=(0,c.useQueryClient)();return(0,i.Ne)("/api/organizations/".concat(r,"/share/").concat(t),"DELETE",(e,n)=>{if(!n)return[];let r=n.findIndex(e=>e.uuid===t);if(!(r>-1))return n;{let e=[...n];return e.splice(r,1),e}},{enabled:!!r,queryKey:[s.zb,{orgUUID:r,conversationUUID:e}],onSuccess:()=>{u.invalidateQueries([s.zb,{orgUUID:r,conversationUUID:e}]),u.invalidateQueries([s.ld,{orgUUID:r,snapshotUUID:t}]),u.invalidateQueries([s.VH,{orgUUID:r}])},meta:{errorMessage:"There was an error while trying to unshare the conversation. Please try again."}})},I=(e,t,n)=>{var o,l,d;let{track:v}=(0,r.z$)(),g=null!==(l=null===(o=(0,u.T)())||void 0===o?void 0:o.preview_feature_uses_artifacts)&&void 0!==l&&l,{activeOrganization:_}=(0,a.useCurrentAccount)(),f=null==_?void 0:_.uuid,p=(0,c.useQueryClient)(),h=[s.I8,{orgUUID:f},{uuid:e}];return(0,i.uC)("/api/organizations/".concat(null!=f?f:"","/chat_conversations/").concat(e,"/chat_messages/").concat(null!==(d=t.uuid)&&void 0!==d?d:"","/chat_feedback"),t.chat_feedback?"PUT":"POST",{enabled:!!f,meta:{errorMessage:"We could not save your feedback. Please try again later."},onSuccess(){var r;v({event_key:"claudeai.conversation.feedback.sent",message_uuid:t.uuid,conversation_uuid:e,artifacts_enabled:g,conversationHasArtifacts:n,type:null===(r=t.chat_feedback)||void 0===r?void 0:r.type}),p.invalidateQueries(h)}})},z=()=>{let e=(0,c.useQueryClient)(),{activeOrganization:t}=(0,a.useCurrentAccount)(),n=null==t?void 0:t.uuid;return(0,h.useCallback)((t,r)=>{t&&(e.setQueryData([s.I8,{orgUUID:n},{uuid:t}],e=>e&&{...e,...r}),e.setQueryData([s.tv,{orgUUID:n}],e=>null==e?void 0:e.map(e=>e.uuid!==t?e:{...e,...r})))},[n,e])},B=e=>{let t=(0,c.useQueryClient)(),{activeOrganization:n}=(0,a.useCurrentAccount)(),r=null==n?void 0:n.uuid,u=z();return(0,i.uC)("/api/organizations/".concat(r,"/chat_conversations/").concat(e),"PUT",{onMutate:n=>{var i;let{name:a}=n,o=t.getQueryData([s.I8,{orgUUID:r},{uuid:e}]);return u(e,{name:a}),{oldTitle:null!==(i=null==o?void 0:o.name)&&void 0!==i?i:""}},onError(t,n,r){r&&u(e,{name:r.oldTitle})}})},D=e=>{let t=z(),{activeOrganization:n}=(0,a.useCurrentAccount)();return(0,i.uC)("/api/organizations/".concat(null==n?void 0:n.uuid,"/chat_conversations/").concat(e,"/title"),"POST",{onSuccess(n){let{title:r}=n;t(e,{name:null!=r?r:""})},meta:{noToast:!0}})};function O(e){return e.text+e.attachments.map(e=>e.extracted_content).join(" ")}let M=e=>{let{activeOrganization:t}=(0,a.useCurrentAccount)(),n=null==t?void 0:t.uuid;return(0,i.uC)("/api/organizations/".concat(n,"/chat_conversations/").concat(e,"/stop_response"),"POST")},q=e=>{let{activeOrganization:t}=(0,a.useCurrentAccount)(),n=null==t?void 0:t.uuid;return(0,i.uC)("/api/organizations/".concat(n,"/chat_conversations/").concat(e,"/current_leaf_message_uuid"),"PUT")},K=e=>{let{activeOrganization:t}=(0,a.useCurrentAccount)(),n=(0,c.useQueryClient)(),r=null==t?void 0:t.uuid;return(0,i.Ne)("/api/organizations/".concat(r,"/chat_conversations/").concat(e),"PUT",(e,t)=>t?{...t,...e}:void 0,{onSuccess:()=>{n.invalidateQueries([s.tv,{orgUUID:r}]),n.invalidateQueries([s.I8,{orgUUID:r},{uuid:e}])},queryKey:[s.I8,{orgUUID:r},{uuid:e}]})},N=()=>{let{data:e,isLoading:t}=w();return{data:null==e?void 0:e.filter(e=>e.is_starred),isLoading:t}}},50504:function(e,t,n){n.d(t,{FC:function(){return u},HX:function(){return g},QC:function(){return o},fX:function(){return v},kX:function(){return f},mj:function(){return p},vv:function(){return _},wZ:function(){return s}});var r=n(43316),i=n(88253),a=n.n(i);let u="new-assistant-message-uuid",s="new-human-message-uuid",o="00000000-0000-4000-8000-000000000000";function l(e,t){let n=e.get(t);if(void 0===n){let e=Error("Key not found: ".concat(t));throw(0,r.Tb)(e),e}return n}let c=(e,t)=>{let n=null!=t?t:e.current_leaf_message_uuid;if(!n)return e;for(;n!==o;){var r;let t=l(e.parentByChildUuid,n),i=null===(r=l(e.childrenByParentUuid,t))||void 0===r?void 0:r.indexOf(n);e.selectedChildByUuid.set(t,i),n=t}return{...e,current_leaf_message_uuid:t}},d=e=>{var t,n,r;let i=new Map,a=new Map,u=new Map,s=new Map,l=new Map;if(0===e.chat_messages.length)return{messageByUuid:a,parentByChildUuid:u,childrenByParentUuid:s,selectedChildByUuid:l};for(let t of e.chat_messages)i.set(t.index,t),a.set(t.uuid,t);for(let t of e.chat_messages){let e=t.parent_message_uuid;if(!e){let r=t.index-1;for(;!e&&r>=0;)e=null===(n=i.get(r))||void 0===n?void 0:n.uuid,r--}e=null!=e?e:o,u.set(t.uuid,e),s.set(e,(null!==(r=s.get(e))&&void 0!==r?r:[]).concat(t.uuid)),l.set(e,0)}if(!(null===(t=s.get(o))||void 0===t?void 0:t[0]))throw Error("No root message found");return{messageByUuid:a,parentByChildUuid:u,childrenByParentUuid:s,selectedChildByUuid:l}},v=e=>{let t={...e,...d(e)};return t.current_leaf_message_uuid||c(t),c(t,e.current_leaf_message_uuid)},g=e=>{let t=Array.from(e.messageByUuid.values()).map(e=>e.index);return 0===t.length?-1:Math.max(...t)},_=(e,t)=>{for(let r of(e.chat_messages=e.chat_messages.concat(t),t)){var n;if(!r.parent_message_uuid)throw Error("Parent UUID required");let t=r.parent_message_uuid;e.messageByUuid.set(r.uuid,r),e.parentByChildUuid.set(r.uuid,t);let i=null!==(n=e.childrenByParentUuid.get(t))&&void 0!==n?n:[];i.push(r.uuid),e.childrenByParentUuid.set(t,i),e.selectedChildByUuid.set(t,i.length-1)}return c(e,t[t.length-1].uuid)},f=(e,t)=>{let n=[],r=null!=t?t:o;for(;e.childrenByParentUuid.has(r);){let t=l(e.childrenByParentUuid,r);if(0===t.length)break;let i=l(e.selectedChildByUuid,r),a=l(e.messageByUuid,t[i]);n.push({...a,parent_message_uuid:r,nOptions:t.length,selectedOption:i}),r=a.uuid}return n};function p(e,t,n){var r;let i=l(e.parentByChildUuid,t.uuid),u=l(e.childrenByParentUuid,i),s=a()((null!==(r=t.selectedOption)&&void 0!==r?r:0)+n,0,u.length-1);e.selectedChildByUuid.set(i,s);let o=f(e,i);return c(e,o[o.length-1].uuid)}},6700:function(e,t,n){n.d(t,{YZ:function(){return d},z$:function(){return c}});var r=n(28648),i=n(7653),a=n(83041),u=n(11492),s=n(16096),o=n(89937);let l={"ts.eu_election_banner.shown":{version:1,data_team_tag:"ts"},"ts.banner.shown":{version:1,data_team_tag:"ts"},"billing.credit_card.submitted":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.contact_sales.completed":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.contact_sales.loaded":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.payment_info.loaded":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.payment_info.submitted":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.setup_billing.loaded":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.setup_billing.submitted":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.ts_questionnaire.loaded":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.ts_questionnaire.submitted":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.ts_questionnaire_manual.loaded":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.select_plan.loaded":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.select_plan.completed":{version:1,data_team_tag:"billing_funnel"},"console.feedback.opened":{version:1},"console.feedback.submitted":{version:1},"evals.revision.created":{version:1},"evals.show_prompt_preview.toggled":{version:1},"evals.run_all.submitted":{version:1},"evals.test_case.run.submitted":{version:1},"evals.test_case.run.completed":{version:1},"evals.test_case.run.failed":{version:1},"evals.test_case.create.submitted":{version:1},"evals.test_case.delete.submitted":{version:1},"evals.select_revision.clicked":{version:1},"evals.test_case.update_rating.submitted":{version:1},"evals.test_case.import.show_modal.clicked":{version:1},"evals.test_case.import.browse.clicked":{version:1},"evals.test_case.import.success":{version:1},"evals.comparison.add_button.clicked":{version:1},"evals.comparison.remove_button.clicked":{version:1},"evals.comparison.other_revision.selected":{version:1},"test_case_generator.generate.started":{version:1},"test_case_generator.edit_logic.clicked":{version:1},"metaprompter.modal.loaded":{version:1},"metaprompter.example.selected":{version:1},"metaprompter.generate.started":{version:1},"metaprompter.generate.stop.attempted":{version:1},"metaprompter.generate.finished":{version:1},"metaprompter.start_editing.clicked":{version:1},"onboarding.invite_accept_page.invite_accept.submitted":{version:1,data_team_tag:"onboarding_funnel"},"onboarding.invite_accept_page.invite_reject.submitted":{version:1,data_team_tag:"onboarding_funnel"},"onboarding.invite_accept_page.loaded":{version:1,data_team_tag:"onboarding_funnel"},"onboarding.organization_create.loaded":{version:1,data_team_tag:"onboarding_funnel"},"onboarding.organization_create.submitted":{version:1,data_team_tag:"onboarding_funnel"},"workbench.completion.started":{version:1},"workbench.completion.finished":{version:1},"workbench.tab_selection.clicked":{version:1},"workbench.variables_pane.loaded":{version:1},"claudeai.projects.list_view.switched":{version:1},"claudeai.conversation.suggestion.applied":{version:1},"claudeai.conversation.recent.opened":{version:1},"claudeai.projects.activity.shared_conversation.opened":{version:1},"claudeai.settings.preview_feature.toggled":{version:1},"claudeai.settings.preview_feature.opened":{version:1},"claudeai.support.opened":{version:1},"claudeai.conversation.feedback.sent":{version:1}},c=()=>{let e=(0,o.K)(),{account:t,activeOrganization:n,isLoading:r}=(0,s.useCurrentAccount)(),a=(0,u.useIsClaudeDot)(),c=(0,i.useCallback)(i=>{if(r)return;let{event_key:u,...s}=i;return e.track(u,{account_uuid:null==t?void 0:t.uuid,organization_uuid:null==n?void 0:n.uuid,billing_type:null==n?void 0:n.billing_type,surface:a?"claude-ai":"console",...l[u],...s})},[e,t,n,a,r]);return(0,i.useMemo)(()=>({track:c}),[c])},d=(e,t,n,i)=>{let u=c(),{onSuccess:s,onError:o,...l}=i||{};return(0,a.uC)(t,n,{onSuccess(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];u.track({event_key:e,result:"success"}),null==s||s(...n)},onError(t){let n;for(var i=arguments.length,a=Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];t instanceof r.Hx&&(n=t.type),u.track({event_key:e,result:"failure",failure_reason:n}),null==o||o(t,...a)},...l})}},83243:function(e,t,n){var r,i;n.d(t,{DF:function(){return u},iw:function(){return a}}),(i=r||(r={})).GoogleTagManager="google_tag_manager",i.GoogleEnhancedConversions="google_enhanced_conversions";let a={analytics:!1,marketing:!1},u={analytics:!0,marketing:!0}},17179:function(e,t,n){n.d(t,{I:function(){return s},T:function(){return u}});var r=n(27573),i=n(7653);let a=(0,i.createContext)(null),u=()=>{let e=(0,i.useContext)(a);if(void 0===e)throw Error("useCurrentConversationSettings must be used within a CurrentConversationSettingsProvider");return e},s=e=>{let{children:t,settings:n}=e;return(0,r.jsx)(a.Provider,{value:n,children:t})}},89937:function(e,t,n){n.d(t,{K:function(){return u}});var r=n(87050),i=n(11492),a=n(21728);let u=()=>{let{segmentKey:e,segmentCdnHost:t,segmentApiHost:n}=(0,i.useConfiguration)(),{value:u}=(0,r.F)("requires_explicit_consent");return a.u.loadIfNecessary({segmentKey:e,segmentCdnHost:t,segmentApiHost:n,requiresExplicitConsent:u})}},21728:function(e,t,n){n.d(t,{u:function(){return g}});var r=n(14983),i=n(70478),a=n(39625),u=n(43316),s=n(27794),o=n.n(s),l=n(83243),c=n(23532);class d{constructor(){this.name="RemoveUserAgent",this.version="1.0.0",this.type="before",this.isLoaded=()=>!0,this.load=()=>Promise.resolve(),this.redactPiiFromContext=e=>{var t;return(null==e?void 0:null===(t=e.event)||void 0===t?void 0:t.context)&&(delete e.event.context.userAgent,delete e.event.context.email,e.event.context.ip="REDACTED"),e},this.track=this.redactPiiFromContext,this.identify=this.redactPiiFromContext,this.page=this.redactPiiFromContext,this.group=this.redactPiiFromContext,this.alias=this.redactPiiFromContext,this.screen=this.redactPiiFromContext}}class v{constructor(){this.consentChangedCallback=o(),this.preferences=v.mapConsentPreferences(l.iw),this.analyticsBrowser=null,this.loadIfNecessary=e=>{let{segmentKey:t,segmentCdnHost:n,segmentApiHost:r,requiresExplicitConsent:i}=e;return this.analyticsBrowser||(this.analyticsBrowser=new a.b,this.loadInitialConsentPreferences(i),this.wrapAnalyticsWithConsent(this.analyticsBrowser).load({writeKey:t,cdnURL:"https://".concat(n),plugins:[new d]},{disableClientPersistence:!0,integrations:{"Segment.io":{apiHost:"".concat(r,"/v1"),protocol:"https"}}}).catch(e=>{(0,u.Tb)(e,{extra:{message:"Failed to load analytics"}})})),this.analyticsBrowser},this.registerOnConsentChanged=e=>{this.consentChangedCallback=e},this.getCategories=()=>this.preferences,this.loadInitialConsentPreferences=e=>{let t;try{t=c.browserCookieStore.get(r.cn.CONSENT_PREFERENCES)}catch(e){(0,u.Tb)(e,{extra:{message:"Failed to get consent preferences cookie"}})}if(t)try{let e=JSON.parse(t);this.preferences=v.mapConsentPreferences(e)}catch(e){console.warn("Malformed consent preferences cookie",t)}else e||(this.preferences=v.mapConsentPreferences(l.DF))},this.updateCategories=e=>{this.preferences=v.mapConsentPreferences(e),this.consentChangedCallback(this.preferences)},this.wrapAnalyticsWithConsent=e=>(0,i.K)({registerOnConsentChanged:this.registerOnConsentChanged,getCategories:this.getCategories})(e)}}v.mapConsentPreferences=e=>({marketing:e.marketing,analytics:e.analytics,necessary:!0});let g=new v},36665:function(e,t,n){n.d(t,{B:function(){return i}});var r=n(7653);function i(e){let t=JSON.stringify(e);return(0,r.useMemo)(()=>e,[t])}},28505:function(e,t,n){n.d(t,{H:function(){return r}});let r=()=>void 0===crypto.randomUUID?"".concat(1e7,"-",1e3,"-",4e3,"-",8e3,"-",1e11).replace(/[018]/g,e=>{let t=parseInt(e);return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)}):crypto.randomUUID()}}]);